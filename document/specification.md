# dark-kifu-for-js仕様

KIF形式かCSA形式を読み込めるようにする。
ブログや個人サイトで動けるような仕組みにする。

ベースのコード部分はbabelを通してコンパイルするようにする。

# mobile first

モバイルで動くように作り、その後PC版を作成する。
レスポンシブデザインで作る。


# デザイン

Flatデザインベースで作る。
豪華なデザインは後で追加する。
プラグイン形式で、簡単にデザインを調整できるようにしたい。


# 操作に関して

ボタンタップで動くようにする。ボタンの数は2個〜3個程度にしたい。

# コメントに関して

コメント表示はオプションでON/OFFできるようにする。
モバイル版は思い切って表示しなくてもいいかもしれない。


https://qiita.com/toshi-toma/items/080b89000ed7f0242bee


# 分析

盤の作り方

Shogi.io
table+img

shogidb2.com
svg

eiou.jp
div+p+img

NHK
img


操作ボタンの数

Shogi.io
6個。

1. 最初へ
2. 戻る
3. 自動再生
4. 進む
5. 最後へ
6. 盤面反転


shogidb2.com
4個

1. 最初へ
2. 戻る
3. 進む
4. 最後へ


eiou.jp
8個

1. 最初へ
2. 十手戻る
3. 戻る
4. 再生
5. 進む
6. 十手進む
7. 最後へ
8. 盤面反転（ただし、これは2列め以降）

NHK
6個

1. 最初へ
2. 十手前
3. 戻る
4. 自動再生
5. 進む
6. 十手先

PCだと、最後へまでが表示されているが、モバイルの場合、割り切りで最後へをカットしている。


コメント

Shogi.io
表示される

shogidb2.com
表示される

eiou.jp
表示されない

NHK
表示されない


指定の手へジャンプ

shogi.io
できる

shogidb2.com
できない

eiou.jp
できる

NHK
できない


# 考察

shogi.io
→基本機能は備わっているが、デザイン性が悪い。
ダブルタップしてもちゃんとキャンセルされるのがGood。
→ソースコードを解析したら、kifu-for-jsの改造版だった。


shogidb2.com
→出来る操作がかなり限られている。アプリでの操作でほぼまかなっているので、Webの方はそこまで作り込んでいない。
ボタンが大きいので、押しやすい。
ダブルタップがキャンセルされないので、連打には不向き。
→こちらも独自のデータを使っているが、sfen文字列が含まれている。


eiou.jp
→色々と作り込まれている。UIの洗練度もかなり高い。
ボタンが多すぎるのが気になる。
指定の手へのジャンプ機能がめちゃくちゃ使いやすい。
ダブルタップがキャンセルされないので、連打には不向き。
→独自のjsonを使っているが、内容的にはCSA標準棋譜ファイル方式を採用しているっぽい。



NHK
→ボタンが分かりやすい＆押しやすく工夫されている。
なぜか画像で全部操作しているのが面白い。
→独自のデータを使っているが、変換が可能っぽい。
https://shogi.zukeran.org/tools/nhk2ki2.html

https://www.nhk.or.jp/goshogi/kifu/score/2019/20200202.nsp.dat.txt?1581692120781

1b191716101617191b
001400000000001200
1d1d1d1d1d1d1d1d1d
000000000000000000
000000000000000000
0000000000000e0000
0e0e0e0e0e0e000e0e
000300000000000500
0c0a08070207080a0c
76;

1b191716101617191b
001400000000001200
1d1d1d1d1d1d1d001d
000000000000001d00
000000000000000000
0000000000000e0000
0e0e0e0e0e0e000e0e
000300000000000500
0c0a08070207080a0c
84;

pは、盤面情報。最後の2個が指し手
h1やh2は持ち駒




